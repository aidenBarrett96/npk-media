{"version":3,"file":"index.es.js","sources":["../src/index.js"],"sourcesContent":["import React from 'react';\n\nexport const NODE_HEADING = 'heading';\nexport const NODE_CODEBLOCK = 'code_block';\nexport const NODE_PARAGRAPH = 'paragraph';\nexport const NODE_QUOTE = 'blockquote';\nexport const NODE_OL = 'ordered_list';\nexport const NODE_UL = 'bullet_list';\nexport const NODE_LI = 'list_item';\nexport const NODE_HR = 'horizontal_rule';\nexport const NODE_BR = 'hard_break';\nexport const NODE_IMAGE = 'image';\n\nexport const MARK_BOLD = 'bold';\nexport const MARK_ITALIC = 'italic';\nexport const MARK_STRIKE = 'strike';\nexport const MARK_UNDERLINE = 'underline';\nexport const MARK_CODE = 'code';\nexport const MARK_LINK = 'link';\nexport const MARK_STYLED = 'styled';\n\nexport function render(document, options = {}) {\n    if (\n        typeof document === 'object' &&\n        document.type === 'doc' &&\n        Array.isArray(document.content)\n    ) {\n        const {\n            blokResolvers = {},\n            defaultBlockResolver = () => null,\n            nodeResolvers: customNodeResolvers = {},\n            markResolvers: customMarkResolvers = {},\n        } = options;\n\n        const nodeResolvers = {\n            ...defaultNodeResolvers,\n            ...customNodeResolvers,\n        };\n\n        const markResolvers = {\n            ...defaultMarkResolvers,\n            ...customMarkResolvers,\n        };\n\n        let currentKey = 0;\n\n        const addKey = element =>\n            React.isValidElement(element)\n                ? React.cloneElement(element, { key: currentKey++ })\n                : element;\n\n        const renderNodes = nodes => {\n            const elements = nodes\n                ? nodes.map(renderNode).filter(node => node != null)\n                : null;\n            return Array.isArray(elements) && elements.length === 0\n                ? null\n                : elements;\n        };\n\n        const renderNode = node => {\n            if (node.type === 'blok') {\n                const { body } = node.attrs;\n                return body.map(({ component, ...props }) => {\n                    const resolver = blokResolvers[component];\n                    const element = resolver\n                        ? resolver(props)\n                        : defaultBlockResolver(component, props);\n                    return addKey(element);\n                });\n            } else if (node.type === 'text') {\n                const marks = node.marks ?? [];\n                return marks.reduceRight((children, mark) => {\n                    const resolver = markResolvers[mark.type];\n                    return resolver\n                        ? addKey(resolver(children, mark.attrs))\n                        : children;\n                }, node.text);\n            } else {\n                const resolver = nodeResolvers[node.type];\n                return resolver\n                    ? addKey(resolver(renderNodes(node.content), node.attrs))\n                    : null;\n            }\n        };\n\n        return renderNodes(document.content);\n    }\n    return null;\n}\n\nconst simpleNodeResolver = element => children =>\n    children != null ? React.createElement(element, null, children) : null;\n\nconst emptyNodeResolver = element => () =>\n    React.createElement(element);\n\nconst headingNodeResolver = (children, props) =>\n    React.createElement(`h${props.level}`, null, children);\n\nconst imageNodeResolver = (children, props) =>\n    React.createElement('img', props, children);\n\nconst codeblockNodeResolver = (children, props) => {\n    const codeProps = { className: props.class };\n    const code = React.createElement('code', codeProps, children);\n    return React.createElement('pre', null, code);\n};\n\nconst simpleMarkResolver = element => children =>\n    React.createElement(element, null, children);\n\nconst linkMarkResolver = (children, { href, target, linktype }) => {\n    const props = {\n        href: linktype === 'email' ? `mailto:${href}` : href,\n        target,\n    };\n    return React.createElement('a', props, children);\n};\n\nconst styledMarkResolver = (children, props) =>\n    React.createElement('span', { className: props.class }, children);\n\nconst defaultNodeResolvers = {\n    [NODE_HEADING]: headingNodeResolver,\n    [NODE_CODEBLOCK]: codeblockNodeResolver,\n    [NODE_IMAGE]: imageNodeResolver,\n    [NODE_PARAGRAPH]: simpleNodeResolver('p'),\n    [NODE_QUOTE]: simpleNodeResolver('blockquote'),\n    [NODE_OL]: simpleNodeResolver('ol'),\n    [NODE_UL]: simpleNodeResolver('ul'),\n    [NODE_LI]: simpleNodeResolver('li'),\n    [NODE_HR]: emptyNodeResolver('hr'),\n    [NODE_BR]: emptyNodeResolver('br'),\n};\n\nconst defaultMarkResolvers = {\n    [MARK_LINK]: linkMarkResolver,\n    [MARK_STYLED]: styledMarkResolver,\n    [MARK_BOLD]: simpleMarkResolver('b'),\n    [MARK_ITALIC]: simpleMarkResolver('i'),\n    [MARK_STRIKE]: simpleMarkResolver('s'),\n    [MARK_UNDERLINE]: simpleMarkResolver('u'),\n    [MARK_CODE]: simpleMarkResolver('code'),\n};\n"],"names":["NODE_HEADING","NODE_CODEBLOCK","NODE_PARAGRAPH","NODE_QUOTE","NODE_OL","NODE_UL","NODE_LI","NODE_HR","NODE_BR","NODE_IMAGE","MARK_BOLD","MARK_ITALIC","MARK_STRIKE","MARK_UNDERLINE","MARK_CODE","MARK_LINK","MARK_STYLED","render","document","options","type","Array","isArray","content","blokResolvers","defaultBlockResolver","nodeResolvers","customNodeResolvers","markResolvers","customMarkResolvers","defaultNodeResolvers","defaultMarkResolvers","currentKey","addKey","element","React","isValidElement","cloneElement","key","renderNodes","nodes","elements","map","renderNode","filter","node","length","body","attrs","component","props","resolver","marks","reduceRight","children","mark","text","simpleNodeResolver","createElement","emptyNodeResolver","headingNodeResolver","level","imageNodeResolver","codeblockNodeResolver","codeProps","className","class","code","simpleMarkResolver","linkMarkResolver","href","target","linktype","styledMarkResolver"],"mappings":"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"}